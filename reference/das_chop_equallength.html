<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Chop DAS data - equal length — das_chop_equallength • swfscDAS</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Chop DAS data - equal length — das_chop_equallength" />
<meta property="og:description" content="Chop DAS data into approximately equal-length effort segments, averaging conditions by segment" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">swfscDAS</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/swfscDAS.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/DAS_data_join.html">Joining DAS outputs with external data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/smwoodman/swfscDAS/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Chop DAS data - equal length</h1>
    <small class="dont-index">Source: <a href='https://github.com/smwoodman/swfscDAS/blob/master/R/das_chop_equallength.R'><code>R/das_chop_equallength.R</code></a></small>
    <div class="hidden name"><code>das_chop_equallength.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Chop DAS data into approximately equal-length effort segments, averaging conditions by segment</p>
    </div>

    <pre class="usage"><span class='fu'>das_chop_equallength</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for data.frame</span>
<span class='fu'>das_chop_equallength</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for das_df</span>
<span class='fu'>das_chop_equallength</span><span class='op'>(</span>
  <span class='va'>x</span>,
  <span class='va'>conditions</span>,
  <span class='va'>seg.km</span>,
  randpicks.load <span class='op'>=</span> <span class='cn'>NULL</span>,
  distance.method <span class='op'>=</span> <span class='cn'>NULL</span>,
  num.cores <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>an object of class <code>das_df</code>,
or a data frame that can be coerced to class <code>das_df</code>.
This data must be filtered for 'continuous effort sections;
see the Details section below</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>ignored</p></td>
    </tr>
    <tr>
      <th>conditions</th>
      <td><p>see <code><a href='das_effort.html'>das_effort</a></code></p></td>
    </tr>
    <tr>
      <th>seg.km</th>
      <td><p>numeric; target segment length in kilometers</p></td>
    </tr>
    <tr>
      <th>randpicks.load</th>
      <td><p>character, data frame, or <code>NULL</code>.
If character, must be filename of past randpicks output to load and use
(passed to <code>file</code> argument of <code><a href='https://rdrr.io/r/utils/read.table.html'>read.csv</a></code>).
If data frame, randpicks values will be extracted from the data frame.
If <code>NULL</code>, new randpicks values will be generated by the function</p></td>
    </tr>
    <tr>
      <th>distance.method</th>
      <td><p>character; see <code><a href='das_effort.html'>das_effort</a></code>.
Default is <code>NULL</code> since these distances should have already been calculated</p></td>
    </tr>
    <tr>
      <th>num.cores</th>
      <td><p>see <code><a href='das_effort.html'>das_effort</a></code></p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>List of three data frames:</p><ul>
<li><p><code>x</code>, with columns added for the corresponding unique segment code and number</p></li>
<li><p>segdata: data frame with one row for each segment, and columns with
    relevant data (see <code><a href='das_effort.html'>das_effort</a></code> for specifics)</p></li>
<li><p>randpicks: data frame with record of length allocations
    (see Details section above)</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>WARNING - do not call this function directly!
  It is exported for documentation purposes, but is intended for internal package use only.</p>
<p>This function is intended to be called by <code><a href='das_effort.html'>das_effort</a></code>
  when the "equallength" method is specified.
  Thus, <code>x</code> must be filtered for events (rows) where either
  the 'OnEffort' column is <code>TRUE</code> or the 'Event' column is "E";
  see <code><a href='das_effort.html'>das_effort</a></code> for more details.
  This function chops each continuous effort section (henceforth 'effort sections')
  in <code>x</code> into modeling segments (henceforth 'segments') of equal length.
  Each effort section runs from an "R" event to its corresponding "E" event.
  After chopping, <code><a href='das_segdata.html'>das_segdata</a></code> is called to get relevant
  segdata information for each segment.</p>
<p>When chopping the effort sections in segments of length <code>seg.km</code>,
  there are several possible scenarios:</p><ul>
<li><p>The extra length remaining after chopping is greater than or equal to
      half of the target segment length (i.e. <code>&gt;= 0.5*seg.km</code>):
      the extra length is assigned to a random portion of the effort section as its own segment
      (<a href='https://github.com/smwoodman/swfscDAS/blob/master/inst/DAS_chop_equallength_figures.pdf'>see Fig. 1a</a>)</p></li>
<li><p>The extra length remaining after chopping is less than half of the
      target segment length (i.e. <code>&lt; 0.5*seg.km</code>):
      the extra length is added to one of the (randomly selected) equal-length segments
      (<a href='https://github.com/smwoodman/swfscDAS/blob/master/inst/DAS_chop_equallength_figures.pdf'>see Fig. 1b</a>)</p></li>
<li><p>The length of the effort section is less than or equal to
      the target segment length: the entire segment becomes a segment
      (<a href='https://github.com/smwoodman/swfscDAS/blob/master/inst/DAS_chop_equallength_figures.pdf'>see Fig. 1c</a>)</p></li>
<li><p>The length of the effort section is zero: a segment of length zero.
      If there are more than two events (the "B"/R" and "E" events),
      the function throws a warning</p></li>
</ul>

<p>Therefore, the length of each segment is constrained to be between
  one half and one and one half of <code>seg.km</code> (i.e. <code>0.5*seg.km &lt;=</code>
  segment length <code>&gt;=1.5*seg.km</code>),
  and the central tendency is approximately equal to the target segment length.
  The only exception is when a continuous effort section is less than
  one half of the target segment length (i.e. <code>&lt; 0.5*seg.km</code>;
  <a href='https://github.com/smwoodman/swfscDAS/blob/master/inst/DAS_chop_equallength_figures.pdf'>see Fig. 1c</a>).</p>
<p>Note the PDF with Figs. 1a - 1c is included in the package, and can be found at:
  <code><a href='https://rdrr.io/r/base/system.file.html'>system.file("DAS_chop_equal_figures.pdf", package = "swfscDAS")</a></code></p>
<p>'Randpicks' is a record of the random assignments that were made when
  chopping the effort sections into segments, and can be saved to allow
  users to recreate the same random allocation of extra km when chopping.
  The randpicks returned by this function is a data frame with two columns:
  the number of the effort section and the randpick value.
  Users should save the randpicks output to a CSV file,
  which then can be specified using the <code>randpicks.load</code> argument
  to recreate the same effort segments from <code>x</code>
  (i.e., using the same DAS data) in the future.
  Note that when saving with <code><a href='https://rdrr.io/r/utils/read.table.html'>write.csv</a></code>, users must
  specify <code>row.names = FALSE</code> so that the CSV file only has two columns.
  For an example randpicks file, see
  <code><a href='https://rdrr.io/r/base/system.file.html'>system.file("das_sample_randpicks.csv", package = "swfscDAS")</a></code></p>
<p>If the column <code>dist_from_prev</code> does not exist, the distance between
  subsequent events is calculated as described in <code><a href='das_effort.html'>das_effort</a></code></p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Sam Woodman.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


