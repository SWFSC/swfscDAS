<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Chop DAS data - equal length — das_chop_equallength • swfscDAS</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Chop DAS data - equal length — das_chop_equallength"><meta name="description" content="Chop DAS data into approximately equal-length effort segments, averaging
conditions by segment"><meta property="og:description" content="Chop DAS data into approximately equal-length effort segments, averaging
conditions by segment"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">swfscDAS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.4.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/swfscDAS.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/DAS_data_join.html">Joining DAS outputs with external data</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/swfsc/swfscDAS/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Chop DAS data - equal length</h1>
      <small class="dont-index">Source: <a href="https://github.com/swfsc/swfscDAS/blob/main/R/das_chop_equallength.R" class="external-link"><code>R/das_chop_equallength.R</code></a></small>
      <div class="d-none name"><code>das_chop_equallength.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Chop DAS data into approximately equal-length effort segments, averaging
conditions by segment</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">das_chop_equallength</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'data.frame'</span></span>
<span><span class="fu">das_chop_equallength</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'das_df'</span></span>
<span><span class="fu">das_chop_equallength</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">conditions</span>,</span>
<span>  <span class="va">seg.km</span>,</span>
<span>  randpicks.load <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  distance.method <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  num.cores <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>an object of class <code>das_df</code>, or a data frame that can be
coerced to class <code>das_df</code>. This data must be filtered for 'continuous
effort sections; see the Details section below</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>ignored</p></dd>


<dt id="arg-conditions">conditions<a class="anchor" aria-label="anchor" href="#arg-conditions"></a></dt>
<dd><p>see <code><a href="das_effort.html">das_effort</a></code></p></dd>


<dt id="arg-seg-km">seg.km<a class="anchor" aria-label="anchor" href="#arg-seg-km"></a></dt>
<dd><p>numeric; target segment length in kilometers</p></dd>


<dt id="arg-randpicks-load">randpicks.load<a class="anchor" aria-label="anchor" href="#arg-randpicks-load"></a></dt>
<dd><p>character, data frame, or <code>NULL</code>. If character,
must be filename of past randpicks output to load and use (passed to
<code>file</code> argument of <code><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></code>). If data
frame, randpicks values will be extracted from the data frame. If
<code>NULL</code>, new randpicks values will be generated by the function</p></dd>


<dt id="arg-distance-method">distance.method<a class="anchor" aria-label="anchor" href="#arg-distance-method"></a></dt>
<dd><p>character; see <code><a href="das_effort.html">das_effort</a></code>. Default is
<code>NULL</code> since these distances should have already been calculated</p></dd>


<dt id="arg-num-cores">num.cores<a class="anchor" aria-label="anchor" href="#arg-num-cores"></a></dt>
<dd><p>see <code><a href="das_effort.html">das_effort</a></code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>List of three data frames:</p><ul><li><p><code>x</code>, with columns added for the corresponding unique segment
  code and number</p></li>
<li><p>segdata: data frame with one row for each segment,
  and columns with relevant data (see <code><a href="das_effort.html">das_effort</a></code> for specifics)</p></li>
<li><p>randpicks: data frame with record of length allocations (see Details
  section above)</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>WARNING - do not call this function directly! It is exported for
  documentation purposes, but is intended for internal package use only.</p>
<p>This function is intended to be called by <code><a href="das_effort.html">das_effort</a></code> when the
  "equallength" method is specified. Thus, <code>x</code> must be filtered for
  events (rows) where either the 'OnEffort' column is <code>TRUE</code> or the
  'Event' column is "E"; see <code><a href="das_effort.html">das_effort</a></code> for more details. This
  function chops each continuous effort section (henceforth 'effort
  sections') in <code>x</code> into modeling segments (henceforth 'segments') of
  equal length. Each effort section runs from an "R" event to its
  corresponding "E" event. After chopping, <code><a href="das_segdata.html">das_segdata</a></code> is
  called to get relevant segdata information for each segment.</p>
<p>When chopping the effort sections in segments of length <code>seg.km</code>,
  there are several possible scenarios:</p><ul><li><p>The extra length remaining after chopping is greater than or equal
    to half of the target segment length (i.e. <code>&gt;= 0.5*seg.km</code>): the
    extra length is assigned to a random portion of the effort section as its
    own segment
    (<a href="https://github.com/swfsc/swfscDAS/blob/master/inst/DAS_chop_equallength_figures.pdf" class="external-link">see
    Fig. 1a</a>)</p></li>
<li><p>The extra length remaining after chopping is less than
    half of the target segment length (i.e. <code>&lt; 0.5*seg.km</code>): the extra
    length is added to one of the (randomly selected) equal-length segments
    (<a href="https://github.com/swfsc/swfscDAS/blob/master/inst/DAS_chop_equallength_figures.pdf" class="external-link">see
    Fig. 1b</a>)</p></li>
<li><p>The length of the effort section is less than or equal to
    the target segment length: the entire segment becomes a segment
    (<a href="https://github.com/swfsc/swfscDAS/blob/master/inst/DAS_chop_equallength_figures.pdf" class="external-link">see
    Fig. 1c</a>)</p></li>
<li><p>The length of the effort section is zero: a segment of
    length zero. If there are more than two events (the "B"/R" and "E"
    events), the function throws a warning</p></li>
</ul><p>Therefore, the length of each segment is constrained to be between one half
  and one and one half of <code>seg.km</code> (i.e. <code>0.5*seg.km &lt;=</code> segment
  length <code>&gt;=1.5*seg.km</code>), and the central tendency is approximately
  equal to the target segment length. The only exception is when a continuous
  effort section is less than one half of the target segment length (i.e.
  <code>&lt; 0.5*seg.km</code>;
  <a href="https://github.com/swfsc/swfscDAS/blob/master/inst/DAS_chop_equallength_figures.pdf" class="external-link">see
  Fig. 1c</a>).</p>
<p>Note the PDF with Figs. 1a - 1c is included in the package, and can be
  found at: <code>system.file("DAS_chop_equal_figures.pdf", package =
  "swfscDAS")</code></p>
<p>'Randpicks' is a record of the random assignments that were made when
  chopping the effort sections into segments, and can be saved to allow users
  to recreate the same random allocation of extra km when chopping. The
  randpicks returned by this function is a data frame with two columns: the
  number of the effort section and the randpick value. Users should save the
  randpicks output to a CSV file, which then can be specified using the
  <code>randpicks.load</code> argument to recreate the same effort segments from
  <code>x</code> (i.e., using the same DAS data) in the future. Note that when
  saving with <code><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">write.csv</a></code>, users must specify
  <code>row.names = FALSE</code> so that the CSV file only has two columns. For an
  example randpicks file, see <code>system.file("das_sample_randpicks.csv",
  package = "swfscDAS")</code></p>
<p>If the column <code>dist_from_prev</code> does not exist, the distance between
  subsequent events is calculated as described in <code><a href="das_effort.html">das_effort</a></code></p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sam Woodman.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

